INCLUDES=-I../include -I./esp -I./include
LIBS=
CC=gcc
CFLAGS=-g -Wall

clean:
	-rm ./*.o

testing.o: testing.c
	$(CC) $(CFLAGS) $(INCLUDES) -c -o $@ $^ $(LIBS)
	
ringbuffer.o: ../ringbuffer.c
	$(CC) $(CFLAGS) $(INCLUDES) -c -o $@ $^ $(LIBS)

multipart.o: ../multipart.c
	$(CC) $(CFLAGS) $(INCLUDES) -c -o $@ $^ $(LIBS)


test_ringbuffer: test_ringbuffer.c ringbuffer.o testing.o
	$(CC) $(CFLAGS) $(INCLUDES) -o $@ $^ $(LIBS)

test_multipart: test_multipart.c ringbuffer.o multipart.o testing.o
	$(CC) $(CFLAGS) $(INCLUDES) -o $@ $^ $(LIBS)

test_multipart_short: test_multipart_short.c ringbuffer.o multipart.o testing.o
	$(CC) $(CFLAGS) $(INCLUDES) -o $@ $^ $(LIBS)


test: test_ringbuffer test_multipart test_multipart_short
	./test_ringbuffer
	./test_multipart
	./test_multipart_short


.PHONY: test clean
